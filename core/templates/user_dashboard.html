<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { background: linear-gradient(135deg, #001f3f, #0056b3); color: white; min-height: 100vh; }
        .sidebar { width: 250px; height: 100vh; position: fixed; background: rgba(0,0,0,0.3); backdrop-filter: blur(10px); }
        .main-content { margin-left: 250px; padding: 40px; }
        .nav-link { color: #ccc; padding: 12px 20px; font-size: 0.9rem; }
        .nav-link:hover, .nav-link.active { color: white; background: rgba(255,255,255,0.1); }
        /* Style stat boxes to match your primary orange color */
        .stat-box { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; border-left: 4px solid #f27a0d; }
        .stat-box h5 { font-size: 1.8rem; font-weight: bold; }
        canvas { width: 100% !important; height: 100% !important; }
    </style>
</head>
<body>
    <div class="sidebar">
        <nav class="nav flex-column">
            <div class="p-4 small fw-bold text-uppercase opacity-50">Main Navigation</div>
            <a class="nav-link active" href="{% url 'user_dashboard' %}">
                <i class="bi bi-grid me-2"></i> Dashboard
            </a>
            <a class="nav-link" href="{% url 'chatbot' %}"><i class="bi bi-chat-dots me-2"></i> Chatbot</a>

            <div class="p-4 small fw-bold text-uppercase opacity-50 mt-3">Account</div>
            <a class="nav-link" href="{% url 'my_profile' %}"><i class="bi bi-person me-2"></i> My Profile</a>
            <a class="nav-link mt-auto" href="{% url 'logout' %}">
                <i class="bi bi-box-arrow-right me-2"></i> Logout
            </a>
        </nav>
    </div>

    <div class="main-content">
        <div class="row g-4 mb-4">
            <div class="col-md-4"><div class="stat-box"><h5>{{ user_logins }}</h5><p class="small mb-0">User Logins</p></div></div>
            <div class="col-md-4"><div class="stat-box"><h5>{{ total_users }}</h5><p class="small mb-0">Total Users</p></div></div>
            <div class="col-md-4"><div class="stat-box"><h5>{{ bot_interactions }}</h5><p class="small mb-0">Bot Interactions</p></div></div>
        </div>
        
        <div class="card bg-dark bg-opacity-25 border-0 p-4">
            <h5 class="mb-4">Problem Solving Statistics</h5>
            <div style="height: 300px; position: relative;">
                <canvas id="solvingChart"></canvas>
            </div>
        </div>
    </div>

    <script>
        // Real-time Chart Configuration
        const ctx = document.getElementById('solvingChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Issues Solved',
                    data: [12, 19, 13, 25, 22, 33, 45],
                    borderColor: '#f27a0d',
                    backgroundColor: 'rgba(242, 122, 13, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { labels: { color: 'white' } } },
                scales: {
                    y: { ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' } },
                    x: { ticks: { color: 'white' }, grid: { display: false } }
                }
            }
        });
    </script>
</body>
</html>